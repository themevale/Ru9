{% if section.settings.linkvideo != blank %}
  {%- render 'section_css' -%}

  {% style %}
    .best-seller-content {
      max-width: 1452px;
      margin: 0 auto;
      color: #1b2a57;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .best-seller-text {
      margin-top: 40px;
      margin-bottom: 40px;
    }
    .best-seller-text p {
      margin: 0;
      margin-bottom: 30px;
    }
    .best-seller-text p:last-child {
      margin-bottom: 0;
    }
    .best-seller-video iframe {
      border-radius: 34px;
    }
    @media (max-width: 1280px) {
      .best-seller-video iframe {
        max-width: 750px;
        max-height: 750px;
        width: 100%;
      }
      .best-seller-text p {
        margin-bottom: 30px;
      }
    }
    @media (max-width: 768px) {
      .best-seller-html {
        width: 100%;
        margin-top: 12px;
      }
    }
    @media (min-width: 769px) {
      .best-seller-name {
        max-width: 300px;
      }
      .best-seller-text {
        max-width: 599px;
      }
    }
    @media (min-width: 1200px) {
      .best-seller-container {
        margin-top: 96px;
      }
      .best-seller-content .best-seller-content__item {
        width: 50%;
        overflow: hidden;
      }
    }

    @media only screen and (min-width: 1200px) {
      .best-seller-text {
        margin-top: 30px;
        margin-bottom: 30px;
        max-width: 406px;
      }
      .best-seller-text p {
        font-size: 16px;
        line-height: 1.5;
      }
    }

    @media only screen and (max-width: 1199px) and (min-width: 769px) {
      .best-seller-text {
        margin-top: 30px;
        margin-bottom: 30px;
        max-width: 406px;
      }
      .best-seller-text p {
        font-size: 16px;
        line-height: 1.5;
      }
    }
    @media only screen and (max-width: 1200px) and (min-width: 769px) {
      .best-seller-content {
        flex-direction: column;
      }
      .best-seller-content__item.best-seller-html {
        width: 100%;
        margin-bottom: 30px;
      }
      .best-seller-content__item.best-seller-video {
        width: 100%;
      }
    }
    @media (min-width: 1200px) {
      .best-seller-container .best-seller-content {
        max-width: 100%;
      }
      .best-seller-container .best-seller-content {
        grid-gap: 40px;
      }
      .best-seller-container .best-seller-content .best-seller-html {
        width: calc(47.8% - 20px);
      }
      .best-seller-container .best-seller-content .best-seller-video {
        width: calc(52.2% - 20px);
      }
    }

    @media only screen and (max-width: 768px) {
      .best-seller-action {
        text-align: center;
      }
      .best-seller-text {
        margin-top: 16px;
        margin-bottom: 24px;
      }
      .best-seller-text p {
        font-size: 13px;
        line-height: 22px;
      }
      div.best-seller-content {
        display: flex;
        flex-direction: column-reverse;
      }
      div.best-seller-text p {
        margin-bottom: 16px;
      }
      .best-seller-video {
        width: 100%;
      }
      .meta_title_section.medium-up--hide {
        margin-bottom: 17px;
      }
      div.best-seller-video iframe {
        max-height: 357px;
      }
    }

    .featured_video.hide_btn button {
      opacity: 0;
      visibility: hidden;
    }
    .featured_video.hide_btn:hover button {
      opacity: 1;
      visibility: visible;
    }
    .featured_video {
      position: relative;
      display: flex;
      border-radius: 34px;
      overflow: hidden;
      border: 1px solid var(--colorBorder);
    }
    .featured_video video {
      object-fit: cover;
      width: 100%;
      height: 100%;
      aspect-ratio: 1 / 1;
    }
    .featured_video:before {
      content: '';
      position: absolute;
      z-index: 8;
      background: #000;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.2;
    }
    .featured_video.hide_btn:before {
      z-index: -1;
    }
    .featured_video button:hover {
      transform: translate(-50%, -50%) scale(1.1);
    }
    .featured_video button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 9;
      background-color: #3f3d568a;
      height: clamp(64px, 9vw, 80px);
      width: clamp(64px, 9vw, 80px);
      color: #fff;
      border-radius: 100%;
      border: 1px solid;
    }
    .featured_video button svg {
      margin: 0 auto;
      height: clamp(18px, 3vw, 24px);
      width: clamp(18px, 3vw, 32px);
      fill: #fff;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    .pause {
      display: none;
    }
    .featured_video.hide_btn button .pause {
      display: block;
    }
    .featured_video.hide_btn button .play {
      display: none;
    }
    @media (max-width: 768px) {
      .featured_video {
        border-radius: 20px;
      }
      .featured_video video {
        border-radius: 20px;
      }
    }
  {% endstyle %}

  {% liquid
    assign check_layout = section.settings.layout
    if check_layout == 'left'
      assign flex_dir = 'flex-row-reverse'
    else
      assign flex_dir = 'flex-row'
    endif
  %}
  <div
    class="best-seller-container nt_se_{{section.id}}"
    data-section-id="{{ section.id }}"
    data-section-type="best-seller-section"
  >
    <div class="page-width">
      <div class="best-seller-content flex {{ flex_dir }} flex-wrap ai-center jc-between">
        <div class="best-seller-content__item best-seller-html">
          <div class="meta_title_section">
            {% if section.settings.title != blank %}
              <h2 class="best-seller-name f-smb text-lg">{{ section.settings.title | escape }}</h2>
            {% endif %}
          </div>

          {% if section.settings.text != blank %}
            <div class="best-seller-text rte">{{ section.settings.text }}</div>
          {% endif %}
          {% if section.settings['link-text'] != blank %}
            <div class="best-seller-action">
              <a href="{{ section.settings.link-url }}" class="global-button__primary btn">
                {{- section.settings['link-text'] -}}
              </a>
            </div>
          {% endif %}
        </div>
        <div class="best-seller-content__item best-seller-video">
          <div class="meta_title_section medium-up--hide small--hide">
            {% if section.settings.title != blank %}
              <h2 class="best-seller-name f-smb">{{ section.settings.title | escape }}</h2>
            {% endif %}
            {% if section.settings.text != blank %}
              <div class="best-seller-desc rte">{{ section.settings.text }}</div>
            {% endif %}
          </div>
          {% if section.settings.linkvideo != blank %}
            <div class="featured_video page_container">
              <button onclick="playVid()" type="button">
                <svg
                  class="play"
                  xmlns="http://www.w3.org/2000/svg"
                  aria-hidden="true"
                  focusable="false"
                  role="presentation"
                  class="icon icon-play"
                  fill="none"
                  viewBox="0 0 10 14"
                >
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.48177 0.814643C0.81532 0.448245 0 0.930414 0 1.69094V12.2081C0 12.991 0.858787 13.4702 1.52503 13.0592L10.5398 7.49813C11.1918 7.09588 11.1679 6.13985 10.4965 5.77075L1.48177 0.814643Z" fill="currentColor"></path>
                </svg>
                <svg
                  class="pause"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  version="1.1"
                  id="Capa_1"
                  x="0px"
                  y="0px"
                  width="332.145px"
                  height="332.146px"
                  viewBox="0 0 332.145 332.146"
                  style="enable-background:new 0 0 332.145 332.146;"
                  xml:space="preserve"
                >
                  <g>
                      <path d="M121.114,0H25.558c-8.017,0-14.517,6.5-14.517,14.515v303.114c0,8.017,6.5,14.517,14.517,14.517h95.556    c8.017,0,14.517-6.5,14.517-14.517V14.515C135.631,6.499,129.131,0,121.114,0z M106.6,303.113H40.072V29.031H106.6V303.113z"/>
                      <path d="M306.586,0h-95.541c-8.018,0-14.518,6.5-14.518,14.515v303.114c0,8.017,6.5,14.517,14.518,14.517h95.541    c8.016,0,14.518-6.5,14.518-14.517V14.515C321.102,6.499,314.602,0,306.586,0z M292.073,303.113h-66.514V29.031h66.514V303.113z"/>
                  </g>
                </svg>
              </button>
              {% assign poster = section.settings.poster | image_url %}
              {{
                section.settings.linkvideo
                | video_tag:
                  id: 'myVideo',
                  poster: poster,
                  image_size: '1100x',
                  autoplay: false,
                  loop: false,
                  controls: false,
                  muted: false
              }}
            </div>
            <script>
              var vid = document.getElementById('myVideo');
              function playVid() {
                if (vid.paused) {
                  vid.play();
                  document.querySelector('.featured_video').classList.add('hide_btn');
                } else {
                  vid.pause();
                  document.querySelector('.featured_video').classList.remove('hide_btn');
                }

                vid.addEventListener('ended', function () {
                  document.querySelector('.featured_video').classList.remove('hide_btn');
                });
              }
            </script>
          {% else %}
            <iframe
              src="//www.youtube.com/embed/_9VUPq3SxOc?rel=0&showinfo=0&vq=720"
              width="836"
              height="836"
              frameborder="0"
              allowfullscreen
            ></iframe>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endif %}
{% schema %}
{
  "name": "Best Seller",
  "limit": 1,
  "settings": [
    {
      "type": "text",
      "id": "mg",
      "label": "Margin",
      "info": "Margin top, margin right, margin bottom, margin left. If you not use to blank",
      "default": "50px,,20px,",
      "placeholder": "50px,,50px,"
    },
    {
      "type": "text",
      "id": "pd",
      "label": "Padding",
      "info": "Padding top, padding right, padding bottom, padding left. If you not use to blank",
      "placeholder": "50px,,50px,"
    },
    {
      "type": "header",
      "content": "== Design Mobile Options"
    },
    {
      "type": "text",
      "id": "mg_mb",
      "label": "Margin",
      "placeholder": "50px,,50px,"
    },
    {
      "type": "text",
      "id": "pd_mb",
      "label": "Padding",
      "placeholder": "50px,,50px,"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "t:sections.text-and-image.settings.layout.label",
      "default": "right",
      "options": [
        {
          "value": "left",
          "label": "Video on left"
        },
        {
          "value": "right",
          "label": "Video on right"
        }
      ]
    },
    {
      "type": "text",
      "id": "title",
      "label": "Name"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "link-text",
      "label": "Link text"
    },
    {
      "type": "url",
      "id": "link-url",
      "label": "Link url"
    },
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "video",
      "id": "linkvideo",
      "label": "Video(mp4)"
    },
    {
      "type": "image_picker",
      "id": "poster",
      "label": "Poster"
    }
  ],
  "presets": [
    {
      "name": "Best seller"
    }
  ]
}
{% endschema %}
